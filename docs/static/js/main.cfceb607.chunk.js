(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n.p+"static/media/inktoberh.47404842.png"},22:function(e,t,n){e.exports=n.p+"static/media/inktoberv.b2adec7f.png"},23:function(e,t,n){e.exports=n(37)},35:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(20),c=n.n(i),r=n(4),l=n(5),s=n(6),u=n(7),p=n(8),m=n(3),d=n.n(m),h=(n(17),n(21)),f=n.n(h),g=function(){return o.a.createElement("header",null,o.a.createElement("img",{className:"header-logo",src:f.a,alt:"Bahaso Sketch Logo"}))},v=(n(18),n(19),function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.style.overflow="auto"}},{key:"render",value:function(){return o.a.createElement("div",{className:"preview-container"},o.a.createElement("div",{className:"preview-image",style:{backgroundImage:"url(".concat(this.props.image,")")}}),o.a.createElement("div",{className:"preview-button"},o.a.createElement("button",{className:"confirm-button",onClick:this.props.onConfirm},"Upload"),o.a.createElement("div",{className:"cancel",onClick:this.props.onCancel},"Cancel")))}}]),t}(o.a.Component)),b=function(){return o.a.createElement("div",{className:"loading"},"Loading...")},k="inktober2018",y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={file:null,imgPreview:"",uploading:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"confirmUpload",value:function(){var e,t,n=this;if(this.state.file){var a=this.state.file,o=a.name.slice(1+(a.name.lastIndexOf(".")-1>>>0)),i=(t=e||new Date).getFullYear()+""+("0"+(t.getMonth()+1)).slice(-2)+("0"+t.getDate()).slice(-2)+function(e){var t=e||new Date;return("0"+t.getHours()).slice(-2)+""+("0"+t.getMinutes()).slice(-2)+("0"+t.getSeconds()).slice(-2)}()+o;this.setState({uploading:!0}),d.a.storage().ref("".concat(k,"/").concat(i)).put(a,{cacheControl:"public,max-age=31536000"}).then(function(e){return e.ref.getDownloadURL()}).then(function(e){return d.a.database().ref("/".concat(k,"/").concat(("0"+(t||new Date).getDate()).slice(-2))).push({name:d.a.auth().currentUser.email,url:e,path:i});var t}).then(function(){window.location.replace("/")}).catch(function(e){console.log(e),alert("Connection error!"),n.clearUpload()})}}},{key:"clearUpload",value:function(){var e=this.state.imgPreview;URL.revokeObjectURL(e),this.refs.file.value="",this.setState({imgPreview:"",file:null,uploading:!1})}},{key:"handleFiles",value:function(e){if(e.target.files[0]){var t=URL.createObjectURL(e.target.files[0]);this.setState({imgPreview:t,file:e.target.files[0]})}}},{key:"render",value:function(){return this.props.canUpload?o.a.createElement("div",null,o.a.createElement("label",{className:"upload-file-button"},"+",o.a.createElement("input",{ref:"file",type:"file",className:"upload-file-input",onChange:this.handleFiles.bind(this)})),this.state.imgPreview&&o.a.createElement(v,{image:this.state.imgPreview,onConfirm:this.confirmUpload.bind(this),onCancel:this.clearUpload.bind(this)}),this.state.uploading&&o.a.createElement(b,null)):o.a.createElement("div",null,o.a.createElement("button",{className:"upload-file-button",onClick:this.props.onClick},"+"))}}]),t}(o.a.Component),w=n(22),E=n.n(w),O=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.style.overflow="auto"}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"login-wrapper"},o.a.createElement("div",{className:"login-container"},o.a.createElement("div",null,o.a.createElement("img",{className:"logo",src:E.a,alt:"Bahaso X Inktober"})),o.a.createElement("div",null,o.a.createElement("button",{className:"login-button",onClick:function(){var t=new d.a.auth.GoogleAuthProvider;d.a.auth().signInWithPopup(t).then(function(){e.props.onClose()}).catch(function(t){e.setState({error:t.message})})}},"Google Sign In")),o.a.createElement("div",{className:"cancel",onClick:this.props.onClose},"Cancel")))}}]),t}(o.a.Component),j=n(12),C=n(10),N=function(e){var t=e.name,n=e.thumb,a=e.url,i=e.onClick;return o.a.createElement("div",{className:"gallery-item"},o.a.createElement("div",{className:"gallery-image",style:{backgroundImage:"url(".concat(n,")")},onClick:function(){i(t,a)}}))},I=function(e){var t=e.text;return o.a.createElement("div",{className:"gallery-item"},o.a.createElement("div",{className:"gallery-title"},o.a.createElement("span",{className:"text"},t),o.a.createElement("span",null,"OCTOBER")))},L=function(e){var t=e.url,n=e.link;return o.a.createElement("div",{className:"gallery-item"},o.a.createElement("a",{href:n,className:"gallery-image",style:{backgroundImage:"url(".concat(t,")")},target:"_blank",rel:"noopener noreferrer"},o.a.createElement("span",null,"\xa0")))},U=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.style.overflow="auto"}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"popup",onClick:function(){e.props.close()}},o.a.createElement("div",{className:"popup-dialog",onClick:function(e){e.stopPropagation()}},o.a.createElement("div",{className:"popup-header"},o.a.createElement("span",{className:"popup-title"},this.props.title,"\xa0"),o.a.createElement("span",{className:"popup-close",onClick:function(){e.props.close()}},"X")),o.a.createElement("div",{className:"popup-body"},""===this.props.image?o.a.createElement("div",{className:"popup-loading"},"Loading..."):o.a.createElement("img",{src:this.props.image,alt:this.props.title,className:"popup-image"}))))}}]),t}(o.a.Component),S=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={images:[{id:"intro",type:"credit",link:"https://www.instagram.com/p/BnT1LhRgard/",url:"https://scontent-sit4-1.cdninstagram.com/vp/4c84bbb0f608fc3eead1606ad2703750/5C56766E/t51.2885-15/e35/40432064_560631531021277_1406291162821026460_n.jpg"},{id:"themes",type:"credit",link:"https://www.instagram.com/p/BnL2dxfg8Uq/",url:"https://scontent-sit4-1.cdninstagram.com/vp/59f6ee7e0f9cbb3fc8606ac72b4e91c5/5C4330DC/t51.2885-15/e35/39815925_407430529786848_2695135490553675776_n.jpg"}],isPopupOpen:!1,popupImage:"",popupTitle:""},n.openPopup=n.openPopup.bind(Object(C.a)(Object(C.a)(n))),n.closePopup=n.closePopup.bind(Object(C.a)(Object(C.a)(n))),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.a.database().ref("/inktober2018").once("value").then(function(t){var n=[],a=t.val(),o=function(e){var t=a[e],o=function(a){var o=t[a],i=o.name,c=o.url,r=o.thumb,l=o.popup,s=o.path;if(n.push({id:a,type:"photo",name:i,thumb:r,url:l||c}),d.a.auth().currentUser){var u=(s.lastIndexOf(".")<0?s:s.substr(0,s.lastIndexOf(".")))+".jpg";r||d.a.storage().ref("".concat("inktober2018thumb","/").concat(u)).getDownloadURL().then(function(t){d.a.database().ref("/".concat("inktober2018","/").concat(e,"/").concat(a,"/thumb")).set(t.toString())}).catch(function(){console.log("no thumbnail for ",u)}),l||d.a.storage().ref("".concat("inktober2018popup","/").concat(u)).getDownloadURL().then(function(t){d.a.database().ref("/".concat("inktober2018","/").concat(e,"/").concat(a,"/popup")).set(t.toString())}).catch(function(){console.log("no compressed image for ",u)})}};for(var i in t)o(i);n.push({id:e,type:"title",text:e})};for(var i in a)o(i);e.setState({images:Object(j.a)(n.reverse()).concat(Object(j.a)(e.state.images))})}).catch(function(e){console.log(e.message)})}},{key:"openPopup",value:function(e,t){this.setState({isPopupOpen:!0,popupTitle:e,popupImage:t})}},{key:"closePopup",value:function(){this.setState({isPopupOpen:!1,popupImage:"",popupTitle:""})}},{key:"renderImages",value:function(){var e=this;return this.state.images.map(function(t){switch(t.type){case"photo":return o.a.createElement(N,{key:t.id,name:t.name,thumb:t.thumb||t.url,url:t.url,onClick:e.openPopup});case"title":return o.a.createElement(I,{key:t.id,text:t.text});default:return o.a.createElement(L,{key:t.id,url:t.url,link:t.link})}})}},{key:"render",value:function(){return o.a.createElement("div",{className:"gallery-container"},this.state.isPopupOpen&&o.a.createElement(U,{title:this.state.popupTitle,image:this.state.popupImage,close:this.closePopup}),o.a.createElement("div",{className:"gallery"},o.a.createElement("div",{className:"gallery-items"},this.renderImages())))}}]),t}(o.a.Component),P=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={isLoggedIn:!1,isLoginOpen:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;d.a.auth().onAuthStateChanged(function(t){t?e.setState({isLoggedIn:!0}):e.setState({isLoggedIn:!1})})}},{key:"openLogin",value:function(){this.setState({isLoginOpen:!0})}},{key:"closeLogin",value:function(){this.setState({isLoginOpen:!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement(g,null),o.a.createElement(S,null),o.a.createElement(y,{canUpload:this.state.isLoggedIn,onClick:this.openLogin.bind(this)}),this.state.isLoginOpen&&o.a.createElement(O,{onClose:this.closeLogin.bind(this)}))}}]),t}(o.a.Component),x=(n(35),{apiKey:"AIzaSyBy6ff_NDaYxwRK5M6rlvojzmZnfBzGfCI",authDomain:"fir-bahaso.firebaseapp.com",databaseURL:"https://fir-bahaso.firebaseio.com",projectId:"fir-bahaso",storageBucket:"fir-bahaso.appspot.com",messagingSenderId:"134825814680"}),D={apiKey:"AIzaSyBd-we3DS2sZBhExI-VdJrNyKypR_qFAEI",authDomain:"bahaso-sketch.firebaseapp.com",databaseURL:"https://bahaso-sketch.firebaseio.com",projectId:"bahaso-sketch",storageBucket:"bahaso-sketch.appspot.com",messagingSenderId:"267090960672"},R=function(e){d.a.initializeApp(e?D:x)},B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}R(!0),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");B?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):W(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):W(e)})}}(),c.a.render(o.a.createElement(P,null),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.cfceb607.chunk.js.map