(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/inktoberh.47404842.png"},21:function(e,t,a){e.exports=a.p+"static/media/inktoberv.b2adec7f.png"},22:function(e,t,a){e.exports=a(36)},34:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(19),c=a.n(i),r=a(4),l=a(5),s=a(6),u=a(7),p=a(8),m=a(3),d=a.n(m),h=(a(17),a(20)),f=a.n(h),g=function(){return o.a.createElement("header",null,o.a.createElement("img",{className:"header-logo",src:f.a,alt:"Bahaso Sketch Logo"}))},v=(a(18),a(37),function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.style.overflow="auto"}},{key:"render",value:function(){return o.a.createElement("div",{className:"preview-container"},o.a.createElement("div",{className:"preview-image",style:{backgroundImage:"url(".concat(this.props.image,")")}}),o.a.createElement("div",{className:"preview-button"},o.a.createElement("button",{className:"confirm-button",onClick:this.props.onConfirm},"Upload"),o.a.createElement("div",{className:"cancel",onClick:this.props.onCancel},"Cancel")))}}]),t}(o.a.Component)),b=function(){return o.a.createElement("div",{className:"loading"},"Loading...")},y="inktober2018",k=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={file:null,imgPreview:"",uploading:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"confirmUpload",value:function(){var e,t=this;if(this.state.file){var a=d.a.database(),n=d.a.storage(),o=("0"+(e||new Date).getDate()).slice(-2),i=this.state.file,c=i.name.slice(1+(i.name.lastIndexOf(".")-1>>>0)),r=a.ref("/".concat(y,"/").concat(o)),l=r.push().key,s=o+l+c,u=n.ref("".concat(y,"/").concat(s));this.setState({uploading:!0}),u.put(i,{cacheControl:"public,max-age=31536000"}).then(function(e){return e.ref.getDownloadURL()}).then(function(e){return r.child(l).set({name:d.a.auth().currentUser.email,popup:e})}).then(function(){window.location.replace("/")}).catch(function(e){console.log(e),alert("Connection error!"),t.clearUpload()})}}},{key:"clearUpload",value:function(){var e=this.state.imgPreview;URL.revokeObjectURL(e),this.refs.file.value="",this.setState({imgPreview:"",file:null,uploading:!1})}},{key:"handleFiles",value:function(e){if(e.target.files[0]){var t=URL.createObjectURL(e.target.files[0]);this.setState({imgPreview:t,file:e.target.files[0]})}}},{key:"render",value:function(){return this.props.canUpload?o.a.createElement("div",null,o.a.createElement("label",{className:"upload-file-button"},"+",o.a.createElement("input",{ref:"file",type:"file",className:"upload-file-input",onChange:this.handleFiles.bind(this)})),this.state.imgPreview&&o.a.createElement(v,{image:this.state.imgPreview,onConfirm:this.confirmUpload.bind(this),onCancel:this.clearUpload.bind(this)}),this.state.uploading&&o.a.createElement(b,null)):o.a.createElement("div",null,o.a.createElement("button",{className:"upload-file-button",onClick:this.props.onClick},"+"))}}]),t}(o.a.Component),E=a(21),w=a.n(E),O=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.style.overflow="auto"}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"login-wrapper"},o.a.createElement("div",{className:"login-container"},o.a.createElement("div",null,o.a.createElement("img",{className:"logo",src:w.a,alt:"Bahaso X Inktober"})),o.a.createElement("div",null,o.a.createElement("button",{className:"login-button",onClick:function(){var t=new d.a.auth.GoogleAuthProvider;d.a.auth().signInWithPopup(t).then(function(){e.props.onClose()}).catch(function(t){e.setState({error:t.message})})}},"Google Sign In")),o.a.createElement("div",{className:"cancel",onClick:this.props.onClose},"Cancel")))}}]),t}(o.a.Component),j=a(12),C=a(10),N=function(e){var t=e.name,a=e.thumb,n=e.url,i=e.onClick;return o.a.createElement("div",{className:"gallery-item"},o.a.createElement("div",{className:"gallery-image",style:{backgroundImage:"url(".concat(a,")")},onClick:function(){i(t,n)}}))},I=function(e){var t=e.text;return o.a.createElement("div",{className:"gallery-item"},o.a.createElement("div",{className:"gallery-title"},o.a.createElement("span",{className:"text"},t),o.a.createElement("span",null,"OCTOBER")))},L=function(e){var t=e.url,a=e.link;return o.a.createElement("div",{className:"gallery-item"},o.a.createElement("a",{href:a,className:"gallery-image",style:{backgroundImage:"url(".concat(t,")")},target:"_blank",rel:"noopener noreferrer"},o.a.createElement("span",null,"\xa0")))},P=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.style.overflow="auto"}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"popup",onClick:function(){e.props.close()}},o.a.createElement("div",{className:"popup-dialog",onClick:function(e){e.stopPropagation()}},o.a.createElement("div",{className:"popup-header"},o.a.createElement("span",{className:"popup-title"},this.props.title,"\xa0"),o.a.createElement("span",{className:"popup-close",onClick:function(){e.props.close()}},"X")),o.a.createElement("div",{className:"popup-body"},""===this.props.image?o.a.createElement("div",{className:"popup-loading"},"Loading..."):o.a.createElement("img",{src:this.props.image,alt:this.props.title,className:"popup-image"}))))}}]),t}(o.a.Component),U=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={images:[{id:"intro",type:"credit",link:"https://www.instagram.com/p/BnT1LhRgard/",url:"https://scontent-sit4-1.cdninstagram.com/vp/4c84bbb0f608fc3eead1606ad2703750/5C56766E/t51.2885-15/e35/40432064_560631531021277_1406291162821026460_n.jpg"},{id:"themes",type:"credit",link:"https://www.instagram.com/p/BnL2dxfg8Uq/",url:"https://scontent-sit4-1.cdninstagram.com/vp/59f6ee7e0f9cbb3fc8606ac72b4e91c5/5C4330DC/t51.2885-15/e35/39815925_407430529786848_2695135490553675776_n.jpg"}],isPopupOpen:!1,popupImage:"",popupTitle:""},a.openPopup=a.openPopup.bind(Object(C.a)(Object(C.a)(a))),a.closePopup=a.closePopup.bind(Object(C.a)(Object(C.a)(a))),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.a.database().ref("/inktober2018").once("value").then(function(t){var a=[],n=t.val();for(var o in n){var i=n[o];for(var c in i){var r=i[c],l=r.name,s=r.thumb,u=r.popup;a.push({id:c,type:"photo",name:l,thumb:s,popup:u})}a.push({id:o,type:"title",text:o})}e.setState({images:Object(j.a)(a.reverse()).concat(Object(j.a)(e.state.images))})}).catch(function(e){console.log(e.message)})}},{key:"openPopup",value:function(e,t){this.setState({isPopupOpen:!0,popupTitle:e,popupImage:t})}},{key:"closePopup",value:function(){this.setState({isPopupOpen:!1,popupImage:"",popupTitle:""})}},{key:"renderImages",value:function(){var e=this;return this.state.images.map(function(t){switch(t.type){case"photo":return o.a.createElement(N,{key:t.id,name:t.name,thumb:t.thumb||t.popup,url:t.popup,onClick:e.openPopup});case"title":return o.a.createElement(I,{key:t.id,text:t.text});default:return o.a.createElement(L,{key:t.id,url:t.url,link:t.link})}})}},{key:"render",value:function(){return o.a.createElement("div",{className:"gallery-container"},this.state.isPopupOpen&&o.a.createElement(P,{title:this.state.popupTitle,image:this.state.popupImage,close:this.closePopup}),o.a.createElement("div",{className:"gallery"},o.a.createElement("div",{className:"gallery-items"},this.renderImages())))}}]),t}(o.a.Component),S=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={isLoggedIn:!1,isLoginOpen:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;d.a.auth().onAuthStateChanged(function(t){t?e.setState({isLoggedIn:!0}):e.setState({isLoggedIn:!1})})}},{key:"openLogin",value:function(){this.setState({isLoginOpen:!0})}},{key:"closeLogin",value:function(){this.setState({isLoginOpen:!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement(g,null),o.a.createElement(U,null),o.a.createElement(k,{canUpload:this.state.isLoggedIn,onClick:this.openLogin.bind(this)}),this.state.isLoginOpen&&o.a.createElement(O,{onClose:this.closeLogin.bind(this)}))}}]),t}(o.a.Component),x=(a(34),{apiKey:"AIzaSyBy6ff_NDaYxwRK5M6rlvojzmZnfBzGfCI",authDomain:"fir-bahaso.firebaseapp.com",databaseURL:"https://fir-bahaso.firebaseio.com",projectId:"fir-bahaso",storageBucket:"fir-bahaso.appspot.com",messagingSenderId:"134825814680"}),B={apiKey:"AIzaSyBd-we3DS2sZBhExI-VdJrNyKypR_qFAEI",authDomain:"bahaso-sketch.firebaseapp.com",databaseURL:"https://bahaso-sketch.firebaseio.com",projectId:"bahaso-sketch",storageBucket:"bahaso-sketch.appspot.com",messagingSenderId:"267090960672"},W=function(e){d.a.initializeApp(e?B:x)},R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}W(!0),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");R?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):D(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):D(e)})}}(),c.a.render(o.a.createElement(S,null),document.getElementById("root"))}},[[22,2,1]]]);
//# sourceMappingURL=main.3980aacd.chunk.js.map