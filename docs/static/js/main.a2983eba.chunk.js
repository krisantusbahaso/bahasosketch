(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n.p+"static/media/inktoberh.47404842.png"},29:function(e,t,n){e.exports=n.p+"static/media/inktoberv.b2adec7f.png"},30:function(e,t,n){e.exports=n(49)},47:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(23),c=n.n(i),r=n(7),l=n(12),s=n(27),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.payload;case"LOGOUT":return{};default:return e}},p=n(15),m=n(18),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PICTURES":return t.payload;case"ADD_PICTURE":var n=t.payload,a=n.day,o=n.key,i=n.name,c=n.thumb,r=n.popup;return Object(m.a)({},e,Object(p.a)({},a,Object(m.a)({},e[a],Object(p.a)({},o,{name:i,thumb:c,popup:r}))));default:return e}},h=Object(l.c)({user:u,pictures:d}),f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,g=Object(l.e)(h,f(Object(l.a)(s.a))),v=n(3),b=n(4),y=n(5),E=n(6),O=n(8),k=n(28),w=n.n(k),j=function(){return o.a.createElement("header",null,o.a.createElement("img",{className:"header-logo",src:w.a,alt:"Bahaso Sketch Logo"}))},N=function(e){function t(){return Object(v.a)(this,t),Object(y.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.style.overflow="auto"}},{key:"render",value:function(){return o.a.createElement("div",{className:"preview-container"},o.a.createElement("div",{className:"preview-image",style:{backgroundImage:"url(".concat(this.props.image,")")}}),o.a.createElement("div",{className:"preview-button"},o.a.createElement("button",{className:"confirm-button",onClick:this.props.onConfirm},"Upload"),o.a.createElement("div",{className:"cancel",onClick:this.props.onCancel},"Cancel")))}}]),t}(o.a.Component),C=function(){return o.a.createElement("div",{className:"loading"},"Loading...")},P=n(11),L=n.n(P),U=(n(42),n(44),n(50),"".concat("bahaso-sketch",".firebaseapp.com")),I="https://".concat("bahaso-sketch",".firebaseio.com"),S="".concat("bahaso-sketch",".appspot.com");(function(){L.a.initializeApp({apiKey:"AIzaSyBd-we3DS2sZBhExI-VdJrNyKypR_qFAEI",authDomain:U,databaseURL:I,projectId:"bahaso-sketch",storageBucket:S})})();var T=L.a.auth(),_=L.a.database(),D=L.a.storage(),R={self:T,login:function(){return T.signInWithPopup(new L.a.auth.GoogleAuthProvider)},logout:function(){return T.signOut()}},A=function(e){return _.ref(e).once("value")},x=function(e,t){var n=(new Date).getDate().toString().padStart(2,"0"),a=e.name.slice(1+(e.name.lastIndexOf(".")-1>>>0)),o=_.ref("/".concat(t,"/").concat(n)),i=o.push().key,c=n+i+a;return D.ref("".concat(t,"/").concat(c)).put(e,{cacheControl:"public,max-age=31536000"}).then(function(e){return e.ref.getDownloadURL()}).then(function(e){return o.child(i).set({name:L.a.auth().currentUser.email,thumb:e,popup:e}).then(function(){return{day:n,key:i,name:L.a.auth().currentUser.email,thumb:e,popup:e}})})},W={onAuth:function(){return function(e){R.self.onAuthStateChanged(function(t){if(t){var n=t.displayName,a=t.email,o=t.photoURL,i=t.uid;e({type:"LOGIN",payload:{uid:i,email:a,displayName:n,photoURL:o}})}else e({type:"LOGOUT"})})}},login:function(){return function(e){return R.login()}},logout:function(){return function(e){return R.logout()}}},B={getPictures:function(e){return function(t){return A(e).then(function(e){t({type:"FETCH_PICTURES",payload:e.val()})})}},addPicture:function(e,t){return function(n){return x(e,t).then(function(e){n({type:"ADD_PICTURE",payload:e})})}}},G=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(y.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(o)))).state={file:null,imgPreview:"",uploading:!1},n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"confirmUpload",value:function(){var e=this;this.state.file&&(this.setState({uploading:!0}),this.props.upload(this.state.file,"inktober2018").catch(function(){alert("Something wrong, please try again!")}).then(function(){e.clearUpload()}))}},{key:"clearUpload",value:function(){var e=this.state.imgPreview;URL.revokeObjectURL(e),this.refs.file.value="",this.setState({imgPreview:"",file:null,uploading:!1})}},{key:"handleFiles",value:function(e){if(e.target.files[0]){var t=URL.createObjectURL(e.target.files[0]);this.setState({imgPreview:t,file:e.target.files[0]})}}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("label",{className:"upload-file-button"},"+",o.a.createElement("input",{ref:"file",type:"file",className:"upload-file-input",onChange:this.handleFiles.bind(this)})),this.state.imgPreview&&o.a.createElement(N,{image:this.state.imgPreview,onConfirm:this.confirmUpload.bind(this),onCancel:this.clearUpload.bind(this)}),this.state.uploading&&o.a.createElement(C,null))}}]),t}(o.a.Component),M=Object(r.b)(null,{upload:B.addPicture})(G),F=n(29),X=n.n(F),J=function(e){function t(){return Object(v.a)(this,t),Object(y.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.style.overflow="auto"}},{key:"render",value:function(){return o.a.createElement("div",{className:"login-wrapper"},o.a.createElement("div",{className:"login-container"},o.a.createElement("div",null,o.a.createElement("img",{className:"logo",src:X.a,alt:"Bahaso X Inktober"})),o.a.createElement("div",null,o.a.createElement("button",{className:"login-button",onClick:this.props.login},"Google Sign In")),o.a.createElement("div",{className:"cancel",onClick:this.props.onClose},"Cancel")))}}]),t}(o.a.Component),q=Object(r.b)(null,{login:W.login})(J),z=Object(r.b)(null,{logout:W.logout})(function(e){var t=e.logout;return o.a.createElement("button",{className:"logout-button",onClick:t},"LOGOUT")}),H=n(13),K=function(e){var t=e.name,n=e.thumb,a=e.url,i=e.onClick;return o.a.createElement("div",{className:"gallery-item"},o.a.createElement("div",{className:"gallery-image",style:{backgroundImage:"url(".concat(n,")")},onClick:function(){i(t,a)}}))},V=function(e){var t=e.text;return o.a.createElement("div",{className:"gallery-item"},o.a.createElement("div",{className:"gallery-title"},o.a.createElement("span",{className:"text"},t),o.a.createElement("span",null,"OCTOBER")))},Q=function(e){var t=e.url,n=e.link;return o.a.createElement("div",{className:"gallery-item"},o.a.createElement("a",{href:n,className:"gallery-image",style:{backgroundImage:"url(".concat(t,")")},target:"_blank",rel:"noopener noreferrer"},o.a.createElement("span",null,"\xa0")))},Z=function(e){function t(){return Object(v.a)(this,t),Object(y.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.style.overflow="auto"}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"popup",onClick:function(){e.props.close()}},o.a.createElement("div",{className:"popup-dialog",onClick:function(e){e.stopPropagation()}},o.a.createElement("div",{className:"popup-header"},o.a.createElement("span",{className:"popup-title"},this.props.title,"\xa0"),o.a.createElement("span",{className:"popup-close",onClick:function(){e.props.close()}},"X")),o.a.createElement("div",{className:"popup-body"},""===this.props.image?o.a.createElement("div",{className:"popup-loading"},"Loading..."):o.a.createElement("img",{src:this.props.image,alt:this.props.title,className:"popup-image"}))))}}]),t}(o.a.Component),$=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(y.a)(this,Object(E.a)(t).call(this,e))).state={isPopupOpen:!1,popupImage:"",popupTitle:""},n.openPopup=n.openPopup.bind(Object(H.a)(Object(H.a)(n))),n.closePopup=n.closePopup.bind(Object(H.a)(Object(H.a)(n))),n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.loadData("/inktober2018")}},{key:"openPopup",value:function(e,t){this.setState({isPopupOpen:!0,popupTitle:e,popupImage:t})}},{key:"closePopup",value:function(){this.setState({isPopupOpen:!1,popupImage:"",popupTitle:""})}},{key:"renderPictures",value:function(){var e=this,t=[],n=this.props.pictures;return t.push(o.a.createElement(Q,{key:"intro",link:"https://www.instagram.com/p/BnT1LhRgard/",url:"https://scontent-sit4-1.cdninstagram.com/vp/4c84bbb0f608fc3eead1606ad2703750/5C56766E/t51.2885-15/e35/40432064_560631531021277_1406291162821026460_n.jpg"})),t.push(o.a.createElement(Q,{key:"themes",link:"https://www.instagram.com/p/BnL2dxfg8Uq/",url:"https://scontent-sit4-1.cdninstagram.com/vp/59f6ee7e0f9cbb3fc8606ac72b4e91c5/5C4330DC/t51.2885-15/e35/39815925_407430529786848_2695135490553675776_n.jpg"})),Object.keys(n).sort().forEach(function(a){var i=n[a];Object.keys(i).forEach(function(n){var a=i[n];t.push(o.a.createElement(K,{key:n,name:a.name,thumb:a.thumb,url:a.popup,onClick:e.openPopup}))}),t.push(o.a.createElement(V,{key:a,text:a}))}),t.reverse()}},{key:"render",value:function(){return o.a.createElement("div",{className:"gallery-container"},this.state.isPopupOpen&&o.a.createElement(Z,{title:this.state.popupTitle,image:this.state.popupImage,close:this.closePopup}),o.a.createElement("div",{className:"gallery"},o.a.createElement("div",{className:"gallery-items"},this.renderPictures())))}}]),t}(o.a.Component),Y=Object(r.b)(function(e){return{pictures:e.pictures}},{loadData:B.getPictures})($),ee=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(y.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(o)))).state={isLoginOpen:!1},n}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.onAuth()}},{key:"openLogin",value:function(){this.setState({isLoginOpen:!0})}},{key:"closeLogin",value:function(){this.setState({isLoginOpen:!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement(j,null),o.a.createElement(Y,null),this.props.isLoggedIn&&o.a.createElement(M,null),this.state.isLoginOpen&&o.a.createElement(q,{onClose:this.closeLogin.bind(this)}),this.props.isLoggedIn?o.a.createElement(z,null):o.a.createElement("div",null,o.a.createElement("button",{className:"upload-file-button",onClick:this.openLogin.bind(this)},"+")))}}]),t}(o.a.Component),te=Object(r.b)(function(e){return{isLoggedIn:!!e.user.uid}},{onAuth:W.onAuth})(ee),ne=function(e){return o.a.createElement(r.a,{store:g},o.a.createElement(te,null))},ae=(n(47),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function oe(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),alert("Please refresh this page again!")):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}!function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");ae?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):oe(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):oe(e)})}}(),c.a.render(o.a.createElement(ne,null),document.getElementById("root"))}},[[30,2,1]]]);
//# sourceMappingURL=main.a2983eba.chunk.js.map